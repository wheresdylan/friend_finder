<!DOCTYPE html>


<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>friends homepage</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>

</head>

<body>

    <div class="container">
        <form>
            <div class="form-group">
                <label for="name">Name (Required)</label>
                <input type="text" class="form-control" id="name" placeholder="Name">
            </div>
            <div class="form-group">
                <label for="image">Link an image (Required)</label>
                <input type="text" class="form-control" id="image" placeholder="Link To Photo Image">
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select1">
                        <h5>Pineapple does belong on pizza</h5>
                    </label>
                    <select class="form-control" id="Select1" style="width:180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>
            <h3>Question Two</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select2">
                        <h5>The earth is round</h5>
                    </label>
                    <select class="form-control" id="Select2" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question Three</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select3">
                        <h5>Playstation 4 is better than Xbox One</h5>
                    </label>
                    <select class="form-control" id="Select3" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question Four</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select4">
                        <h5>Progressing in robotic technology is dangerous</h5>
                    </label>
                    <select class="form-control" id="Select4" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question Five</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select5">
                        <h5>Cats are better than dogs</h5>
                    </label>
                    <select class="form-control" id="Select5" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question Six</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select6">
                        <h5>Money does not buy happiness</h5>
                    </label>
                    <select class="form-control" id="Select6" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question Seven</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select7">
                        <h5>Tom Brady is the greatest quarter back of all time</h5>
                    </label>
                    <select class="form-control" id="Select7" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question eight</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select8">
                        <h5>9/11 was a conspiracy</h5>
                    </label>
                    <select class="form-control" id="Select8" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question nine</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select9">
                        <h5>Big foot is real</h5>
                    </label>
                    <select class="form-control" id="Select9" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question Ten</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select10">
                        <h5>Tacobell?</h5>
                    </label>
                    <select class="form-control" id="Select10" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>



            <button type="submit" class="btn btn-primary submit" disabled="disabled">Submit</button>
        </form>

        <br>

        <div class="alert alert-warning alert-dismissible fade show alertThing" role="alert">
            <strong>
                <h2>Congratulations!!</h2>
            </strong>
            <br>
            <h3 id="newMatch"></h3>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friends">API friends Link</a>
            </div>
        </footer>

    </div>


</body>

</html>

<script type="text/javascript">


    $('#image').keyup(function () {
        if ($('#image').val() != '') {
            $('.submit').removeAttr('disabled');
        } else {
            $('.submit').attr('disabled', 'disabled');
        }
    });

    $('#name').keyup(function () {
        if ($('#name').val() != '') {
            $('.submit').removeAttr('disabled');
        } else {
            $('.submit').attr('disabled', 'disabled');
        }
    });


    var totalDifference = 0;

    $(".alertThing").hide();

    $('.close').on("click", function () {
        $(".alertThing").hide();
    });

    $(".submit").on("click", function (event) {
        event.preventDefault();

        var number = 0;
        var differenceArray = [];
        var positionArray = [];

        var totalDifference = 0;

        var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#image").val().trim(),
            scores: [parseInt($("#Select1").val().charAt(0)),
            parseInt($("#Select2").val().charAt(0)),
            parseInt($("#Select3").val().charAt(0)),
            parseInt($("#Select4").val().charAt(0)),
            parseInt($("#Select5").val().charAt(0)),
            parseInt($("#Select6").val().charAt(0)),
            parseInt($("#Select7").val().charAt(0)),
            parseInt($("#Select8").val().charAt(0)),
            parseInt($("#Select9").val().charAt(0)),
            parseInt($("#Select10").val().charAt(0))]
        };

        $.post("/api/friends", newFriend, function (data) {

        });

        $.get("/api/friends", function (req, res) {
            for (var i = 0; i < req.length - 1; i++) {

                var newName;

                for (var r = 0; r < 10; r++) {

                    var newNumber = 0;

                    newNumber = numberDifference(parseInt(newFriend.scores[r]), req[i].scores[r])

                    number += newNumber;

                }

                newName = req[i].name;

                differenceArray.push({ name: newName, score: number });
                positionArray.push(number);

                number = 0;

            }

            var index = 0;
            var value = positionArray[0];
            for (var i = 1; i < positionArray.length; i++) {
                if (positionArray[i] < value) {
                    value = positionArray[i];
                    index = i;
                }
            }

            $("#newMatch").html("You Matched With " + differenceArray[index].name)

            $(".alertThing").show();
        });

        $("#name").val("");
        $("#image").val("");
        $('.submit').attr('disabled', 'disabled');

    });

    function numberDifference(num1, num2) {
        if (num1 > num2) {
            return num1 - num2
        }
        else {
            return num2 - num1
        }
    }

</script>