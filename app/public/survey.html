<!DOCTYPE html>


<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>friends homepage</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>

</head>

<body>

    <div class="container">
        <form>
            <div class="form-group">
                <label for="name">Example label</label>
                <input type="text" class="form-control" id="name" placeholder="Name">
            </div>
            <div class="form-group">
                <label for="image">Another label</label>
                <input type="text" class="form-control" id="image" placeholder="Link To Photo Image">
            </div>

            <h3>Question OneOne</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select1">Example select</label>
                    <select class="form-control" id="Select1" style="width:180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>
            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select2">Example select</label>
                    <select class="form-control" id="Select2" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select3">Example select</label>
                    <select class="form-control" id="Select3" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select4">Example select</label>
                    <select class="form-control" id="Select4" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select5">Example select</label>
                    <select class="form-control" id="Select5" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select6">Example select</label>
                    <select class="form-control" id="Select6" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select7">Example select</label>
                    <select class="form-control" id="Select7" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select8">Example select</label>
                    <select class="form-control" id="Select8" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select9">Example select</label>
                    <select class="form-control" id="Select9" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>

            <h3>Question One</h3>
            <div class="form-group">
                <div class="form-group">
                    <label for="Select10">Example select</label>
                    <select class="form-control" id="Select10" style="width: 180px">
                        <option value="" selected disabled>Select Option</option>
                        <option>1(strongly disagree)</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5(strongly agree)</option>
                    </select>
                </div>
            </div>



            <button type="submit" class="btn btn-primary submit">Submit</button>
        </form>

        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friends">API friends Link</a>
                    <!-- | <a href="/api/waitlist">API Wait List</a> -->
            </div>
        </footer>

    </div>


</body>

</html>

<script type="text/javascript">

    var totalDifference = 0;

    $(".submit").on("click", function (event) {
        event.preventDefault();

        var number = 0;
        var differenceArray = [];
        var positionArray = [];

        var totalDifference = 0;

        var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#image").val().trim(),
            scores: [parseInt($("#Select1").val().charAt(0)),
            parseInt($("#Select2").val().charAt(0)),
            parseInt($("#Select3").val().charAt(0)),
            parseInt($("#Select4").val().charAt(0)),
            parseInt($("#Select5").val().charAt(0)),
            parseInt($("#Select6").val().charAt(0)),
            parseInt($("#Select7").val().charAt(0)),
            parseInt($("#Select8").val().charAt(0)),
            parseInt($("#Select9").val().charAt(0)),
            parseInt($("#Select10").val().charAt(0))]
        };

        $.post("/api/friends", newFriend, function (data) {

        });

        $.get("/api/friends", function (req, res) {
            for (var i = 0; i < req.length - 1; i++) {

                var newName;

                for (var r = 0; r < 10; r++) {

                    // console.log(newFriend.scores[r]);
                    // console.log(req[i].scores[r]);

                    var newNumber = 0;


                    newNumber = numberDifference(parseInt(newFriend.scores[r]), req[i].scores[r])
                    // newFriend.scores[r] - req[i].scores[r];

                    number += newNumber;

                }



                // console.log(number);

                newName = req[i].name;
                // console.log(newName);

                differenceArray.push({ name: newName, score: number });
                positionArray.push(number);

                number = 0;


                // console.log(newFriend.scores[i]);

            }
            // alert(differenceArray);



            var index = 0;
            var value = positionArray[0];
            for (var i = 1; i < positionArray.length; i++) {
                if (positionArray[i] < value) {
                    value = positionArray[i];
                    index = i;
                }
            }
            
            alert("You Matched With " + differenceArray[index].name)
        });

        $("#name").val("");
        $("#image").val("");

    });

    function numberDifference(num1, num2) {
        if (num1 > num2) {
            return num1 - num2
        }
        else {
            return num2 - num1
        }
    }

</script>